document.addEventListener("DOMContentLoaded",(()=>{const e=e=>{const t=window.innerWidth;t>=1200&&(e.style.zoom=(t-1200)/720*.5+1)};[".uc-scale-container",".uc-step_title1",".uc-step_title2",".uc-res"].forEach((t=>{const n=(e=>{if(e.startsWith("#")){const t=document.getElementById(e.slice(1));return t?[t]:[]}return e.startsWith(".")?Array.from(document.querySelectorAll(e)):[]})(t);n.forEach((t=>{e(t),window.addEventListener("resize",(()=>e(t)))}))})),t_onReady((function(){t_onFuncLoad("t396_init",(function(){const e={},t=document.querySelector('textarea[name="origPrompt"]'),n=document.querySelector(".pxb-char-count");n.querySelector(".tn-atom").classList.add("gc");const a=document.querySelector(".pxb-enhance"),o=(document.querySelector(".uc-step_title2"),document.querySelector(".uc-res")),r=o.querySelector(".t004 .t-container"),s=r.querySelector(".t-text");s.innerHTML='<pre class="pxb-response" style="height:auto;"></pre>';const i=o.querySelector(".pxb-response"),l=document.querySelector(".uc-copy-prompt"),c=l.querySelector(".pxb-copy-prompt");a.classList.add("disabled"),l.classList.add("disabled"),localStorage.setItem("ai_lang","input");let d=localStorage.getItem("ai_lang")||"input";e.ai_lang=localStorage.getItem("ai_lang")||"input";const u=document.querySelector('select.t-select[name="res_lang"]'),m={"العربية":"arabic","الإنجليزية":"english","الالمانية":"german","الإسبانية":"spanish","الفرنسية":"french","الروسية":"russian"};u.addEventListener("change",(function(t){i.innerHTML="",l.classList.add("disabled");const n=t.target.value;n?localStorage.setItem("ai_lang",m[n]):localStorage.setItem("ai_lang","input"),d=localStorage.getItem("ai_lang")||"input",e.ai_lang=d,"arabic"!==d&&"input"!==d?(r.style.textAlign="left",s.style.direction="ltr",s.style.fontFamily="TildaSans"):(r.style.textAlign="",s.style.direction="",s.style.fontFamily="Cairo")}));const y=500;""!==t.value.trim()&&t.value.trim().length<=y&&(e.prompt=t.value.trim()),t.addEventListener("input",(function(){let e=t.value.trim();""!==e?a.classList.remove("disabled"):a.classList.add("disabled"),e.length>y&&(e=e.substring(0,y).trim(),t.value=e),n.querySelector(".tn-atom").innerHTML=`${e.length} / 500`,e.length>=y?(n.querySelector(".tn-atom").classList.remove("gc"),n.querySelector(".tn-atom").classList.add("ec")):(n.querySelector(".tn-atom").classList.remove("ec"),n.querySelector(".tn-atom").classList.add("gc"))})),a.addEventListener("click",(async()=>{if(!a.classList.contains("disabled")){let n=t.value.trim();if(n.length>y)return;e.prompt=n,a.classList.add("disabled"),a.querySelector(".tn-atom").classList.add("progress"),a.querySelector(".tn-atom").innerHTML="ثواني ...",l.classList.add("disabled"),d=localStorage.getItem("ai_lang")||"input",i.innerHTML="";try{const t=await fetch("https://api.plz-ai.me/v1/gp",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Network response was not ok");window.location.hash="#step2",i.style.fontFamily=d&&"arabic"!==d&&"input"!==d?"TildaSans":"Cairo";const n=t.body.getReader(),o=new TextDecoder,r=async({done:e,value:t})=>{if(e)return l.classList.remove("disabled"),a.classList.remove("disabled"),a.querySelector(".tn-atom").innerHTML="ظبط الكلام",a.querySelector(".tn-atom").classList.remove("progress"),void history.replaceState(null,"",window.location.pathname+window.location.search);const s=o.decode(t,{stream:!0});return i.textContent+=s,n.read().then(r)};await n.read().then(r)}catch(e){window.location.hash="#step2",setTimeout((()=>{history.replaceState(null,"",window.location.pathname+window.location.search)}),100),i.innerHTML="arabic"!==d&&"input"!==d?"Sorry, ERROR.\nDon’t worry, just try again later!":"للأسف فيه مشكلة بسيطة.\nما تزعلش وحاول تاني بعد شوية.",a.classList.remove("disabled"),a.querySelector(".tn-atom").innerHTML="ظبط الكلام"}}})),c.addEventListener("click",(function(){!function(e){let t=e.querySelector(".tn-atom"),n=t.innerText,a=i.textContent;navigator.clipboard.writeText(a).then((()=>{t.innerText="تمام, أخدنا الكوبي",setTimeout((()=>{t.innerText=n}),3e3)})).catch((e=>{}))}(this)}));var p=new XMLHttpRequest;p.open("GET","https://geo.tildacdn.com/geo/country/",!0),p.onload=function(){if(p.status>=200&&p.status<400&&"RU"!==p.responseText){var e=document.querySelectorAll(".uc-blocked");Array.prototype.forEach.call(e,(function(e){e.style.display="none"}))}},p.send()}))}))}));