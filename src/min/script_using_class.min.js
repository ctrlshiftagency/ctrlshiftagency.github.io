!function(){var e;e=function(){let e=localStorage.getItem("ws_theme")||"dark";e&&"dark"===e&&document.querySelector("body").classList.add("dark");const t=e=>{const t=window.innerWidth;t>=1200&&(e.style.zoom=(t-1200)/720*.5+1)};[".uc-scale-container",".uc-step_title1",".uc-step_title2",".uc-res"].forEach((e=>{const n=(e=>{if(e.startsWith("#")){const t=document.getElementById(e.slice(1));return t?[t]:[]}return e.startsWith(".")?Array.from(document.querySelectorAll(e)):[]})(e);n.forEach((e=>{t(e),window.addEventListener("resize",(()=>t(e)))}))})),t_onFuncLoad("t396_init",(function(){const t=500,n={};let a=null,r=null,l=null,s=null,o=null,i=null,c=null,d=null,u=null,m=null,p=null,y=null,g=null,L=null,v=null,h=null,S=null,b=!1,f=localStorage.getItem("ai_lang")||"input";const w={"العربية":"arabic","الإنجليزية":"english","الالمانية":"german","الإسبانية":"spanish","الفرنسية":"french","الروسية":"russian"};function q(){r.value="",u.classList.add("disabled"),i.innerHTML="0 / 500",n.prompt="",s.classList.add("disabled")}function x(){if(!r||!o)return;let e=r.value.trim();""!==e&&u?(u.classList.remove("disabled"),s.classList.remove("disabled")):u&&(u.classList.add("disabled"),s.classList.add("disabled")),e.length>t&&(e=e.substring(0,t).trim(),r.value=e);const n=o.querySelector(".tn-atom");n&&(n.innerHTML=`${e.length} / 500`,e.length>=t?(n.classList.remove("gc"),n.classList.add("ec")):(n.classList.remove("ec"),n.classList.add("gc")))}async function T(){if(!u||!r||!v||u.classList.contains("disabled"))return;let e=r.value.trim();if(e.length>t)return;n.prompt=e,u.classList.add("disabled");const a=u.querySelector(".tn-atom");a&&(a.classList.add("progress"),a.innerHTML="ثواني ..."),m&&m.querySelector(".pxb-copy-prompt").classList.add("disabled"),f=localStorage.getItem("ai_lang")||"input",v&&(v.innerHTML="");try{const e=await fetch("https://api.plz-ai.me/v1/gp",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(n)});if(!e.ok)throw await e.text(),new Error(`Network response error: ${e.status}`);window.location.hash="#step2",v&&(v.style.fontFamily=f&&"arabic"!==f&&"input"!==f?"TildaSans":"Cairo");const t=e.body.getReader(),r=new TextDecoder,l=async({done:e,value:n})=>{if(e)return m&&m.querySelector(".pxb-copy-prompt").classList.remove("disabled"),u&&a&&(u.classList.remove("disabled"),a.innerHTML="ظبط الكلام",a.classList.remove("progress")),void history.replaceState(null,"",window.location.pathname+window.location.search);const s=r.decode(n,{stream:!0});return v&&(v.textContent+=s),t.read().then(l)};await t.read().then(l)}catch(e){if(window.location.hash="#step2",setTimeout((()=>{history.replaceState(null,"",window.location.pathname+window.location.search)}),100),v){let t;t="TypeError"===e.name&&e.message.includes("Failed to fetch")?"arabic"!==f&&"input"!==f?"Network connection error. Please check your internet connection.":"في مشكلة في الاتصال بالإنترنت. تأكد من اتصالك بالإنترنت.":"arabic"!==f&&"input"!==f?"Sorry, ERROR.\nDon't worry, just try again later!":"للأسف فيه مشكلة بسيطة.\nما تزعلش وحاول تاني بعد شوية.",v.innerHTML=t}u&&(u.classList.remove("disabled"),a&&(a.innerHTML="ظبط الكلام",a.classList.remove("progress")))}}localStorage.setItem("ai_lang","input"),n.ai_lang=f,new Observer("#allrecords",{debounce:50}).listenToElement("#allrecords",{onFound:e=>{a=e[0],r=a.querySelector('textarea[name="origPrompt"]'),l=a.querySelector(".pxb-clear-input"),o=a.querySelector(".pxb-char-count"),c=a.querySelector(".pxb-align-r .tn-atom"),d=a.querySelector(".pxb-align-l .tn-atom"),u=a.querySelector(".pxb-enhance"),m=a.querySelector(".uc-copy-prompt"),h=a.querySelector(".uc-step_title2"),y=a.querySelector(".uc-res"),o&&(i=o.querySelector(".tn-atom"),i&&i.classList.add("gc")),l&&(s=l.querySelector(".tn-atom"),s&&(s.classList.add("disabled"),s.addEventListener("click",q))),m&&(p=m.querySelector(".pxb-copy-prompt"),m.querySelector(".pxb-copy-prompt").classList.add("disabled")),y&&(g=y.querySelector(".t004 .t-container"),g&&(L=g.querySelector(".t-text"),L&&(L.innerHTML='<pre class="pxb-response" style="height:auto;"></pre>',v=y.querySelector(".pxb-response")))),r&&(""!==r.value.trim()&&r.value.trim().length<=t&&(n.prompt=r.value.trim()),r.addEventListener("input",x),x()),u&&(u.classList.add("disabled"),u.addEventListener("click",T)),p&&p.addEventListener("click",(function(){!function(e){if(!v)return;let t=e.querySelector(".tn-atom");if(!t)return;let n=t.innerText,a=v.textContent;navigator.clipboard.writeText(a).then((()=>{t.innerText="تمام, أخدنا الكوبي",setTimeout((()=>{t.innerText=n}),3e3)})).catch((e=>{}))}(this)})),r&&d&&c&&("rtl"===getComputedStyle(r).direction&&(c.classList.add("active"),d.classList.remove("active")),"ltr"===getComputedStyle(r).direction&&(d.classList.add("active"),c.classList.remove("active")),function(e,t,n){t.addEventListener("click",(function(){e.style.direction="ltr",e.style.textAlign="left",t.classList.add("active"),n.classList.remove("active")})),n.addEventListener("click",(function(){e.style.direction="rtl",e.style.textAlign="right",n.classList.add("active"),t.classList.remove("active")}))}(r,d,c))}}),new Observer(".pxb-form-lang",{trackReferences:!0,debounce:100}).listenToClass("zero-form-rendered",{onFound:e=>{const t=e[0].querySelector('select.t-select[name="res_lang"]');t&&!b&&function(e){e&&(S=function(e){v&&(v.innerHTML=""),m&&m.querySelector(".pxb-copy-prompt").classList.add("disabled");const t=e.target.value;t?localStorage.setItem("ai_lang",w[t]):localStorage.setItem("ai_lang","input"),f=localStorage.getItem("ai_lang")||"input",n.ai_lang=f,g&&L&&("arabic"!==f&&"input"!==f?(g.style.textAlign="left",L.style.direction="ltr",L.style.fontFamily="TildaSans"):(g.style.textAlign="",L.style.direction="",L.style.fontFamily="Cairo"))},e.removeEventListener("change",S),e.addEventListener("change",S),b=!0)}(t)},onRemoved:e=>{e.length>0&&function(e){if(!e)return;const t=e.querySelector('select.t-select[name="res_lang"]');t&&S&&(t.removeEventListener("change",S),b=!1)}(e[0])}});var E=new XMLHttpRequest;E.open("GET","https://geo.tildacdn.com/geo/country/",!0),E.onload=function(){if(E.status>=200&&E.status<400&&"RU"!==E.responseText){var e=document.querySelectorAll(".uc-blocked");Array.prototype.forEach.call(e,(function(e){e.style.display="none"}))}},E.send(),document.querySelector(".day-night .tn-atom").addEventListener("click",(()=>{const t=document.querySelector("body");t.classList.toggle("dark"),e=localStorage.setItem("ws_theme",t.classList.contains("dark")?"dark":"lihgt")}))}))},"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!=document.readyState&&e()}))}();